<h2>Update Passenger</h2>

<!-- popup only when reauth is triggered -->
<app-reauth
  *ngIf="showReauth"
  (reauthSuccess)="onReauthSuccess()"
  (reauthCancel)="onReauthCancel()"
></app-reauth>

<!-- Injection Fix: Restrict input to numeric IDs -->
<input
  [(ngModel)]="id"
  type="number"
  min="1"
  placeholder="Passenger ID"
  required
/>

<button (click)="search()">Load Details</button>

<div *ngIf="passenger">
  <h3>Edit Details:</h3>

  <!--Angular auto-escapes input bindings -->
  <input [(ngModel)]="passenger.FullName" placeholder="Full Name" required />
  <input [(ngModel)]="passenger.PassportNumber" placeholder="Passport Number" required />
  <input [(ngModel)]="passenger.VisaType" placeholder="Visa Type" />
  <input [(ngModel)]="passenger.Nationality" placeholder="Nationality" />
  <input [(ngModel)]="passenger.ArrivalDate" type="date" placeholder="Arrival Date" />
  <input [(ngModel)]="passenger.ArrivalYear" type="number" placeholder="Arrival Year" min="1900" max="2100" />
  <input [(ngModel)]="passenger.PurposeOfVisit" placeholder="Purpose Of Visit" />
  <input [(ngModel)]="passenger.OfficerId" type="number" placeholder="Officer ID" min="1" />

  <button (click)="update()">Update</button>
</div>

<!-- Minimal safe response (no raw JSON exposure) -->
<div *ngIf="response">
  <h3>{{ response }}</h3>
</div>
