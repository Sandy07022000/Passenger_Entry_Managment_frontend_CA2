<h2>Create Passenger</h2>

<!--shows popup when reauth is triggered -->
<app-reauth
  *ngIf="showReauth"
  (reauthSuccess)="onReauthSuccess(createForm)"
  (reauthCancel)="onReauthCancel()"
></app-reauth>

<form #createForm="ngForm" (ngSubmit)="create(createForm)" novalidate>
  <label>Full Name</label>
  <input
    [(ngModel)]="fullName"
    #fullNameRef="ngModel"
    name="fullName"
    required
    maxlength="100"
    placeholder="Full Name" />
  <div *ngIf="fullNameRef.invalid && (fullNameRef.touched || fullNameRef.dirty)" class="error-msg">
    Full Name is required.
  </div>

  <label>Passport Number</label>
  <input
    [(ngModel)]="passportNumber"
    #passportRef="ngModel"
    name="passportNumber"
    required
    maxlength="20"
    placeholder="Passport Number" />
  <div *ngIf="passportRef.invalid && (passportRef.touched || passportRef.dirty)" class="error-msg">
    Passport Number is required.
  </div>

  <label>Visa Type</label>
  <input
    [(ngModel)]="visaType"
    name="visaType"
    maxlength="50"
    placeholder="Visa Type" />

  <label>Nationality</label>
  <input
    [(ngModel)]="nationality"
    name="nationality"
    maxlength="50"
    placeholder="Nationality" />

  <label>Arrival Date</label>
  <input
    [(ngModel)]="arrivalDate"
    name="arrivalDate"
    type="date" />

  <label>Arrival Year</label>
  <input
    [(ngModel)]="arrivalYear"
    #yearRef="ngModel"
    name="arrivalYear"
    type="number"
    min="1900"
    max="2100"
    placeholder="Arrival Year" />
  <div *ngIf="yearRef.invalid && (yearRef.touched || yearRef.dirty)" class="error-msg">
    Arrival Year must be between 1900 and 2100.
  </div>

  <label>Purpose Of Visit</label>
  <input
    [(ngModel)]="purposeOfVisit"
    name="purposeOfVisit"
    maxlength="200"
    placeholder="Purpose Of Visit" />

  <label>Officer ID</label>
  <input
    [(ngModel)]="officerId"
    #officerRef="ngModel"
    name="officerId"
    type="number"
    min="1"
    placeholder="Officer ID" />
  <div *ngIf="officerRef.invalid && (officerRef.touched || officerRef.dirty)" class="error-msg">
    Officer ID must be a valid number greater than 0.
  </div>

  <button type="submit">Create</button>
</form>

<div *ngIf="response" class="success-msg">
  <h3>{{ response }}</h3>
</div>
